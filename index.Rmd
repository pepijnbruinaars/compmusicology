---
title: "Computational Musicology"
author: "Pepijn Bruinaars"
date: "2023-02-13"
output: html_document
---

```{r echo=FALSE, message=FALSE}
library(tidyverse)
library(spotifyr)

corpus_features <- get_playlist_audio_features("", "443PhwLJ63ci5JD8UpzNGf")
styled <- theme_bw() + 
  theme(
    plot.title = element_text(face = "bold", size = 12),
    legend.background = element_rect(fill = "white", linewidth = 4, colour = "white"),
    axis.ticks = element_line(colour = "grey70", linewidth = 0.2),
    panel.grid.major = element_line(colour = "grey70", linewidth = 0.2),
    panel.grid.minor = element_blank()
  )
```

## My portfolio

### Danceability and tempo

I've included a plot with the *tempo*, *danceability* and *valence* of my corpus plotted against each other. I find this graph particularly interesting, since it shows a couple of defining characteristics from the corpus.

Most future bass and house music has a tempo range of 128-160 BPM. These ranges can be spotted easily in the graph, since there are distinct vertical lines which enclose the entirety of this range, with the vast majority of tracks having a tempo between 128 and 160 BPM.

However, the plotted trend line shows that as the tempo increases past the 128 BPM threshold, danceability (on average) seems to decrease, which is unexpected. I excted the danceability to increase as the tempo increases. This is because most high tempo (\>160 BPM) in this corpus are hard-dance tracks, which I've always considered danceable (albeit in a very different way than dancing to other genres). One such outlier is the track in the bottom-right corner: [Infinity by Sefa and D-Block & S-te-Fan](https://open.spotify.com/track/4l549wQMFj7HvlB7jzQnck?si=4202ba0f613f4ade). This is a french-core track with intense kicks, which I would define as a highly danceable track. I will look to find out what defines a danceable track to Spotify.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
corpus_features |> ggplot(aes(x = tempo, y = danceability, color=valence)) +
  geom_jitter(aes(alpha = 0.4)) +
  geom_smooth() +
  annotate("text", 200, 0.1, label = "Infinity") +
  scale_y_continuous(
    limits = c(0, 1)
  ) +
  styled +
  labs(
    x = "Tempo",
    y = "Danceability",
    colour = "Valence",
    title = "Danceability vs. Tempo and Valence",
  ) +
  guides(alpha = FALSE)

```

I also included a histogram which shows the distribution of tempos, and confirms the statements I made above.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
corpus_features |> ggplot(aes(x = tempo)) + 
  theme_bw() + 
  geom_histogram(binwidth = 5)
```
